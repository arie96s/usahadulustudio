<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ISSUE | MAGOS ARCHIVE</title>
  <link rel="icon" type="image/svg+xml" href="../assets/img/magos-icon.svg">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/magos.css">
  
  <style>
      .issue-container { max-width: 1200px; margin: 140px auto 80px; padding: 0 40px; }
      .issue-header { margin-bottom: 60px; }
      .issue-title { font-size: 42px; font-weight: 900; letter-spacing: -2px; text-transform: uppercase; margin: 0; line-height: 1; color: #fff; }
      .issue-description { font-size: 12px; color: #888; margin-top: 15px; max-width: 600px; line-height: 1.6; letter-spacing: 0.5px; }
      
      .issue-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 15px; margin-top: 40px; }
      .issue-item { position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 1/1; cursor: pointer; border: 1px solid #1a1a1a; transition: all 0.4s ease; }
      .issue-item:hover { transform: scale(1.05); border-color: #fff; z-index: 10; }
      .issue-img { width: 100%; height: 100%; object-fit: cover; filter: grayscale(100%); transition: 0.5s; }
      .issue-item:hover .issue-img { filter: grayscale(0%); }

      /* Popup Zoom */
      .img-popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: none; justify-content: center; align-items: center; z-index: 20000; padding: 20px; }
      .img-popup.active { display: flex; }
      .img-popup img { max-width: 90%; max-height: 80vh; border-radius: 10px; }
      .close-popup { position: absolute; top: 30px; right: 30px; color: #fff; font-size: 40px; cursor: pointer; }
      
      @media (max-width: 768px) { .issue-grid { grid-template-columns: repeat(2, 1fr); } }
  </style>
</head>
<body>
    <div id="cursor"></div>

    <header>
        <a href="../../magos.html">
            <img src="../assets/img/magos-icon.svg" alt="MAGOS" class="logo-header">
        </a>
        <nav>
            <a href="../gallery.html" class="hover-target">BACK TO GALLERY</a>
            <a href="../../magos.html" class="hover-target">STUDIO</a>
            <div class="lang-switch hover-target" data-lang="en" id="langToggle" onclick="toggleLanguage()">
                <div class="lang-circle"></div>
            </div>
        </nav>
    </header>

    <main class="issue-container">
        <div class="issue-header">
            <h1 class="issue-title" id="issueTitle">LOADING...</h1>
            <p class="issue-description" id="issueDesc">Sedang mengambil data dari arsip...</p>
        </div>
        <div class="issue-grid" id="issueGrid">
            </div>
    </main>

    <div class="img-popup" id="imgPopup" onclick="this.classList.remove('active')">
        <span class="close-popup">&times;</span>
        <img id="popupImg" src="">
    </div>

    <footer class="industrial-footer">
        <div class="footer-divider"></div>
        <div class="footer-grid">
            <div class="f-col brand-col">
                <img src="../assets/img/logo-header.svg" alt="MAGOS" class="f-logo">
                <p class="f-desc">ESTETIKA GELAP & PAKAIAN INDUSTRIAL.</p>
                <div class="f-status"><span class="dot"></span> SYSTEM ONLINE</div>
            </div>
            <div class="f-col link-col">
                <h4 class="f-head">SITEMAP</h4>
                <ul class="f-links">
                    <li><a href="../../magos.html">STUDIO</a></li>
                    <li><a href="../gallery.html">GALLERY</a></li>
                    <li><a href="../contact.html">CONTACT</a></li>
                </ul>
            </div>
            <div class="f-col link-col">
                <h4 class="f-head">LEGAL</h4>
                <ul class="f-links">
                    <li><a href="../terms.html">TERMS & CONDITIONS</a></li>
                    <li><a href="../privacy.html">PRIVACY POLICY</a></li>
                </ul>
            </div>
            <div class="f-col link-col end-col">
                <h4 class="f-head">CONNECT</h4>
                <ul class="f-social">
                    <li><a href="#">INSTAGRAM ↗</a></li>
                    <li><a href="#">SOCIAL MEDIA <span class="arrow">↗</span></a></li>
                    <li><a href="mailto:contact@magos.com">EMAIL ↗</a></li>
                </ul>
                <p class="f-copyright">©2026 | USAHADULU STUDIO</p>
            </div>
        </div>
    </footer>

    <script src="../js/magos.js"></script>

    <script>
        function openPopup(url) {
            const popup = document.getElementById('imgPopup');
            const popupImg = document.getElementById('popupImg');
            popupImg.src = url;
            popup.classList.add('active');
        }

        async function loadIssueData() {
    try {
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        
        // BETULKAN PATH: Hanya naik satu tingkat ke folder 'magos/', 
        // kemudian masuk ke '_data/' jika folder _data ada di dalam magos/
        // ATAU jika _data di root, gunakan: fetch('../../_data/magos_gallery.json') 
        // Mari kita cuba path yang paling tepat untuk struktur anda:
        const response = await fetch('../_data/magos_gallery.json'); 
        
        const data = await response.json();
        const issue = data.volumes.find(v => v.id == id);
        
        if (issue) {
            document.getElementById('issueTitle').innerText = issue.title;
            document.getElementById('issueDesc').innerText = issue.desc;
            document.title = `${issue.title} | MAGOS ARCHIVE`;

            const grid = document.getElementById('issueGrid');
            grid.innerHTML = issue.images.map(img => {
                // Gambar di config.yml biasanya 'img/nama.jpg'
                // Kita perlu naik satu tingkat ke root untuk akses folder 'img/'
                const fullPath = `../../${img.url}`; 
                return `
                    <div class="issue-item hover-target" onclick="openPopup('${fullPath}')">
                        <img src="${fullPath}" class="issue-img" loading="lazy">
                    </div>
                `;
            }).join('');
        }
    } catch (e) {
        console.error("Gagal sinkronisasi data:", e);
        document.getElementById('issueTitle').innerText = "ERROR LOADING";
    }
}

        window.addEventListener('load', loadIssueData);
    </script>
</body>
</html>