<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MAGOS | USAHADULU Ecosystem</title>
  <link rel="icon" type="image/svg+xml" href="magos/assets/img/magos-icon.svg">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="magos/css/magos.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
  <style>
    /* Gaya Dasar Kapsul Status */
.status-indicator-capsule {
    position: absolute;
    padding: 6px 15px;
    font-size: 10px;
    font-weight: 900;
    letter-spacing: 1px;
    border-radius: 50px;
    z-index: 10;
    text-transform: uppercase;
    pointer-events: none; /* Agar tidak mengganggu klik produk */
}

/* Warna berdasarkan Status */
.status-indicator-capsule.soldout {
    background: #ff0000;
    color: #fff;
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
}

.status-indicator-capsule.presale {
    background: #fff;
    color: #000;
    border: 1px solid #000;
}

/* 1. POSISI LOOKBOOK: Kiri Atas */
.lookbook-layout .status-indicator-capsule {
    top: 20px;
    left: 20px;
}

/* 2. POSISI GRID VIEW: Kanan Bawah */
.ecommerce-grid .status-indicator-capsule {
    bottom: 20px;
    right: 20px;
}

/* Efek Grayscale Otomatis untuk Produk Sold Out */
.prod:has(.soldout) .prod-img-wrapper img {
    filter: grayscale(100%) brightness(0.7);
}
    /* Container untuk tombol aksi di modal */
.action-row-dynamic {
    display: flex !important;
    align-items: center;
    gap: 12px;
    margin-top: 30px;
    width: 100%;
}

/* Gaya tombol icon (Wishlist & Cart) agar kotak industrial */
.action-icon-btn {
    width: 55px;
    height: 55px;
    flex-shrink: 0;
    border: 1px solid #222;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: 0.3s;
    background: transparent;
}

.action-icon-btn:hover {
    border-color: #fff;
    background: rgba(255,255,255,0.05);
}

/* Tombol utama ACQUIRE_NOW */
#btnAcquireNow {
    flex: 1;
    height: 55px;
    border-radius: 12px;
    font-weight: 900;
    letter-spacing: 2px;
    font-size: 11px;
}
   /* ==========================================================================
   TOTAL MOBILE OPTIMIZATION (MAGOS ARCHIVE) - COMPLETED VERSION
   ========================================================================== */

@media (max-width: 768px) {
    /* 1. HEADER & NAVIGATION */
    header {
        padding: 15px 5% !important;
        height: auto !important;
        flex-wrap: wrap !important;
        gap: 10px !important;
    }
    nav {
        order: 3;
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 15px;
        border-top: 1px solid #111;
        padding-top: 12px;
    }
    nav a { font-size: 9px !important; letter-spacing: 1px !important; }
    .studio-link { display: none !important; }

    /* 2. PRODUCT MODAL WINDOW */
    .modal-window {
        width: 95% !important;
        height: 92vh !important;
        display: block !important; 
        overflow-y: auto !important;
        border-radius: 20px !important;
        padding: 0 !important;
    }
    .product-slider-wrapper {
        width: 100% !important;
        height: 320px !important; 
        border-right: none !important;
        border-bottom: 1px solid #1a1a1a;
    }
    .modal-info {
        width: 100% !important;
        padding: 20px !important;
        height: auto !important;
        display: block !important; 
        overflow: visible !important;
    }

    /* 3. PRODUCT TABS & DESCRIPTION */
    .product-tabs {
        margin-bottom: 35px !important;
        display: block;
        clear: both;
    }
    .tab-header { gap: 15px !important; }
    .tab-link { font-size: 9px !important; }

    /* 4. SIZE SELECTION FRAME */
    .size-selection-frame {
        margin: 30px 0 !important; 
        padding: 20px 10px !important;
        border: 1px dashed #444 !important;
        border-radius: 20px !important;
        background: rgba(255,255,255,0.02) !important;
        display: block;
        clear: both;
    }
    .stock-container { 
        gap: 12px !important; 
        justify-content: center !important;
    }
    .stock-circle {
        width: 38px !important;
        height: 38px !important;
        font-size: 10px !important;
    }

    /* 5. FOMO ALERT & STATUS BADGES */
    #stockScarcity {
        margin-top: 10px !important;
        margin-bottom: 20px !important;
        height: auto !important;
    }
    #scarcityText {
        font-size: 8px !important;
        letter-spacing: 1px !important;
    }
    /* Posisi Badge Status di HP (Grid View) agar tidak menutupi harga */
    .ecommerce-grid .status-indicator-capsule {
        top: 10px !important;
        right: 10px !important;
        bottom: auto !important;
        font-size: 8px !important;
        padding: 4px 10px !important;
    }

    /* 6. ACTION BUTTONS (DYNAMIC STICKY) */
    .action-row-dynamic {
        position: sticky !important; 
        bottom: 0;
        background: #050505;
        padding: 20px 0 !important;
        margin-top: 40px !important;
        border-top: 1px solid #1a1a1a;
        width: 100% !important;
        display: flex !important;
        gap: 10px !important;
        z-index: 100;
    }
    #btnAcquireNow {
        height: 55px !important;
        font-size: 10px !important;
        font-weight: 900 !important;
        flex: 1;
    }
    .action-icon-btn {
        width: 55px !important;
        height: 55px !important;
        flex-shrink: 0;
    }

    /* 7. MODAL CLOSE BUTTON */
    .modal-close {
        top: 15px !important;
        right: 15px !important;
        width: 38px !important;
        height: 38px !important;
        background: rgba(0,0,0,0.6) !important;
        border-radius: 50%;
        z-index: 2000 !important;
        line-height: 38px !important;
    }

    /* 8. SKELETON LOADING HP */
    .is-loading .skeleton {
        height: 300px !important;
    }
}

@media (max-width: 600px) {
    /* 9. GRID LAYOUTS MOBILE */
    #productGrid.lookbook-layout {
        grid-template-columns: 1fr !important;
        gap: 40px !important;
    }
    #productGrid.ecommerce-grid {
        grid-template-columns: 1fr 1fr !important;
        gap: 15px !important;
        padding: 0 3% !important;
    }
    #productGrid.ecommerce-grid .meta h4 { font-size: 11px !important; }
    #productGrid.ecommerce-grid .meta p { font-size: 10px !important; }
    #productGrid.ecommerce-grid .prod { padding: 10px !important; }
    
    /* 10. CART & CHECKOUT MOBILE */
    .cart-item-row {
        grid-template-columns: 1fr !important;
        text-align: center;
        gap: 20px;
    }
    .cart-item-info { flex-direction: column; }
    .total-value { font-size: 28px !important; }
    .checkout-grid { grid-template-columns: 1fr !important; }
}

/* 11. ANIMATIONS & SHARED STYLES */
@keyframes blinkRed {
    0% { opacity: 1; }
    50% { opacity: 0.3; }
    100% { opacity: 1; }
}
.blink-red { animation: blinkRed 0.8s infinite; }

.size-selection-wrapper {
    margin: 25px 0;
    padding: 20px 10px;
    border: 1px dashed #444;
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.02);
}

/* --- Tambahan Khusus Galeri & Issue di Mobile --- */
@media (max-width: 768px) {
    /* 1. Gallery Grid (Halaman Utama Galeri) */
    .album-grid {
        grid-template-columns: 1fr !important; /* Menjadi 1 kolom besar di HP */
        gap: 25px !important;
        padding: 0 !important;
    }

    .album-card {
        border-radius: 16px !important; /* Sudut sedikit lebih tegas di layar kecil */
        aspect-ratio: 4/5 !important; /* Lebih tinggi agar visual cover maksimal */
    }

    .album-info {
        padding: 25px 20px !important;
    }

    .album-title {
        font-size: 20px !important; /* Ukuran teks judul album yang pas untuk HP */
    }

    /* 2. Gallery Issue (Detail Album) */
    .issue-grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Selalu 2 kolom agar rapi */
        gap: 10px !important;
    }

    .issue-title {
        font-size: 28px !important; /* Judul issue tidak terlalu memenuhi layar */
        letter-spacing: -1px !important;
    }

    .issue-description {
        font-size: 11px !important;
        line-height: 1.5 !important;
    }

    /* 3. Popup Zoom Gambar */
    .img-popup img {
        max-width: 95% !important;
        max-height: 70vh !important;
    }
}

@media (max-width: 480px) {
    /* Penyesuaian untuk HP yang sangat kecil */
    .gallery-main-title {
        font-size: 32px !important;
    }
}

    /* --- PERBAIKAN TOTAL LABEL KATEGORI & ANIMASI HOVER --- */

/* 1. Gaya Dasar & Mode Lookbook (Label di Atas) */
.prod {
    display: flex;
    flex-direction: column;
}

.prod .label {
    display: inline-block;
    order: -1; /* Memaksa label pindah ke paling atas */
    margin-bottom: 12px; /* MEMBERI JARAK agar tidak menghimpit judul */
    margin-top: 15px;
    padding: 5px 12px;
    font-size: 8px;
    font-weight: 900;
    letter-spacing: 1px;
    border: 1px solid #222;
    border-radius: 50px;
    color: #fff;
    background: transparent; /* Dasar transparan */
    text-transform: uppercase;
    width: fit-content;
    transition: all 0.3s ease; /* Durasi animasi */
}

/* 2. Khusus Mode Grid View (Label di Bawah) */
#productGrid.ecommerce-grid .label {
    order: 2; /* Pindah ke posisi bawah setelah harga */
    margin-top: 12px;
    margin-bottom: 0;
    color: #fff;
    background: #111; /* Background sedikit gelap untuk mode grid */
    border: 1px solid #333;
}

/* 3. EFEK HOVER SERAGAM (Lookbook & Grid View) */
/* Saat kotak produk disentuh, label akan berubah warna secara halus */
.prod:hover .label {
    background: #fff !important;
    color: #000 !important;
    border-color: #fff !important;
}

/* Memastikan Metadata (Judul & Harga) berada di posisi yang benar */
#productGrid.ecommerce-grid .meta {
    order: 1;
}
   /* ==========================================================================
   PERBAIKAN SKELETON LOADING & GRID VIEW
   ========================================================================== */

/* 1. Animasi Skeleton yang Lebih Halus */
.skeleton {
    background: linear-gradient(90deg, #050505 25%, #151515 50%, #050505 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s infinite linear;
    border-radius: 20px; /* Konsisten dengan border-radius produk */
    border: 1px solid #1a1a1a;
    width: 100%;
    height: 400px; /* Tinggi default agar layout tidak 'melompat' saat loading */
    display: block;
}

@keyframes skeleton-shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* 2. Sembunyikan SEMUA Konten (Termasuk Label Kategori) Saat Loading */
.is-loading .prod-img-wrapper, 
.is-loading .meta, 
.is-loading .label {
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
}

/* 3. Gaya Grid E-commerce yang Rapi & Industrial */
#productGrid.ecommerce-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 30px;
    padding: 0 5%;
}

#productGrid.ecommerce-grid .prod {
    background: #080808;
    border: 1px solid #1a1a1a;
    border-radius: 20px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

#productGrid.ecommerce-grid .prod:hover {
    border-color: #333;
    transform: translateY(-5px);
    background: #0a0a0a;
}

#productGrid.ecommerce-grid .prod-img-wrapper {
    border-radius: 15px;
    overflow: hidden;
    margin-bottom: 15px;
    aspect-ratio: 3/4; /* Menjaga konsistensi tinggi gambar */
}

#productGrid.ecommerce-grid .meta {
    text-align: left;
    padding: 5px 0;
    order: 1; /* Posisi di tengah antara gambar dan label */
}

#productGrid.ecommerce-grid .meta h4 {
    font-size: 14px;
    font-weight: 900;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
    color: #fff;
    text-transform: uppercase;
}

#productGrid.ecommerce-grid .meta p {
    color: #888;
    font-size: 12px;
    font-weight: 700;
    margin: 0;
}

/* Badge Harga lebih menonjol di mode grid */
#productGrid.ecommerce-grid .meta p::before {
    content: "PRICE: ";
    font-size: 8px;
    color: #444;
    letter-spacing: 1px;
}

    /* Tambahkan di dalam tag <style> di magos.html */
@media (max-width: 768px) {
    .modal-info .info-bottom {
        padding-bottom: 80px; /* Memberi ruang agar konten tidak tertutup tombol sticky */
    }

    #realAddToCartBtn {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        width: 90% !important;
        z-index: 9999;
        box-shadow: 0 -10px 20px rgba(0,0,0,0.5);
    }
    
    /* Tombol Wishlist tetap di samping atau menyesuaikan */
    #realWishlistBtn {
        position: fixed;
        bottom: 20px;
        right: 5%;
        z-index: 10000;
        background: #000;
        border: 1px solid #333;
    }
}

    .product-slide img {
    transition: transform 0.5s ease;
}
.product-slide:hover img {
    transform: scale(1.1); /* Efek zoom saat mouse di atas gambar modal */
}

    @keyframes blink {
    0% { opacity: 1; }
    50% { opacity: 0.3; }
    100% { opacity: 1; }
}
    .related-item {
    cursor: pointer;
    transition: transform 0.3s ease;
    border: 1px solid #111;
    background: #050505;
}
.related-item:hover {
    transform: translateY(-3px);
    border-color: #333;
}
.related-item img {
    width: 100%;
    aspect-ratio: 1/1;
    object-fit: cover;
    filter: grayscale(100%);
    transition: filter 0.3s ease;
}
.related-item:hover img {
    filter: grayscale(0%);
}
.related-item p {
    font-size: 8px;
    font-weight: 900;
    margin: 5px 0;
    text-align: center;
    color: #fff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 0 5px;
}
      /* --- Marquee/Teks Berjalan --- */
      .marquee-container { 
          background: #fff; color: #000; padding: 8px 0; 
          overflow: hidden; white-space: nowrap; border-bottom: 1px solid #333; 
          position: relative; z-index: 900;
      }
      .marquee-content { 
          display: inline-block; animation: marquee 20s linear infinite; 
          font-weight: 900; font-size: 12px; letter-spacing: 1px; 
      }
      @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

      /* --- HERO SLIDER FULL FIX --- */
.hero-slider-container {
    position: relative;
    width: 100%;
    /* Menghilangkan jarak agar menempel ke tulisan berjalan di atas */
    margin-top: 0 !important; 
    /* Mengunci rasio 16:9 atau bisa gunakan height: 80vh jika ingin tinggi tetap */
    aspect-ratio: 16 / 9; 
    max-height: 85vh; 
    overflow: hidden;
    background: #000;
    display: block !important;
}

.fade-hero-track {
    position: relative;
    width: 100% !important;
    height: 100% !important;
    display: block !important;
}

.fade-slide {
        position: absolute !important;
        top: 0;
        left: 0;
        width: 100% !important;
        height: 100% !important;
        opacity: 0;
        transition: opacity 2s ease-in-out;
        z-index: 1;
    }

    /* LETAKKAN DI SINI */
    .fade-slide::after {
        content: attr(data-promo);
        position: absolute;
        bottom: 10%;
        left: 50%;
        transform: translateX(-50%);
        font-size: 10px;
        letter-spacing: 5px;
        color: rgba(255,255,255,0.5);
        font-weight: 900;
        text-transform: uppercase;
        z-index: 100;
        pointer-events: none;
    }

    .fade-slide.active {
        opacity: 1 !important;
        z-index: 2;
    }

.fade-slide img {
    width: 100% !important;
    height: 100% !important;
    object-fit: contain !important; 
    object-position: center !important;
    
    /* Tambahkan ini untuk memperbesar gambar (1.2 = 120%) */
    transform: scale(1.3); 
    
    background-color: #000;
    filter: grayscale(50%) brightness(0.6);
}

/* Memastikan teks overlay tetap di tengah */
.hero-overlay-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 100;
    text-align: center;
    width: 100%;
    pointer-events: none;
}

/* --- Social Proof Styling (Update) --- */
      .ig-item {
          display: block;
          position: relative;
          overflow: hidden;
          aspect-ratio: 1 / 1; 
          border: 1px solid #222;
          border-radius: 12px; /* Sudut tumpul sesuai style MAGOS */
          transition: transform 0.3s ease, border-color 0.3s ease;
      }

      .ig-item img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          filter: grayscale(100%); /* Warna abu-abu default */
          transition: filter 0.5s ease, transform 0.5s ease;
      }

      /* Efek Hover: Kembali ke warna asli & sedikit zoom */
      .ig-item:hover {
          border-color: #555;
          transform: translateY(-5px);
      }

      .ig-item:hover img {
          filter: grayscale(0%); /* Kembali ke warna asli */
          transform: scale(1.05); /* Sedikit zoom-in */
      }

@media (max-width: 768px) {
    .hero-slider-container { height: 60vh; } /* Lebih pendek di HP */
}

/* Tambahan agar tombol remove selalu bisa diklik */
/* Gabungkan menjadi satu agar tidak konflik */
.ci-remove-capsule, .remove-btn, .close-icon-inside, .wishlist-clear-btn {
    cursor: pointer !important;
    pointer-events: auto !important;
    position: relative;
    z-index: 10000; /* Pastikan di atas drawer */
}

  </style>
</head>
<body>
    <div id="cursor"></div>

    <div id="preloader">
        <div class="preloader-content">
            <img src="magos/assets/img/logo-header.svg" alt="Loading..." class="logo-loader blink-img">
            <div class="loading-line"></div>
        </div>
    </div>

<header>
  <div class="header-left">
      <div class="logo" onclick="window.scrollTo({top:0, behavior:'smooth'})">
        <img src="magos/assets/img/magos-icon.svg" alt="MAGOS" class="logo-header">
      </div>
  </div>

  <nav>
    <a href="index.html" class="studio-link" data-i18n="nav_back">&larr; KEMBALI KE STUDIO</a>
    <a href="#shop" data-i18n="nav_drop">RILISAN TERBARU</a>
    <a href="magos/gallery.html" data-i18n="nav_gallery">GALERI</a> 
    <a href="#" onclick="alert('Coming Soon'); return false;" style="opacity: 0.5;" data-i18n="nav_store">TOKO (SEGERA)</a>
  </nav>

  <div class="header-right" style="display: flex; align-items: center; gap: 20px;">
    
    <div class="lang-switch hover-target" id="langToggle" data-lang="id" onclick="toggleLanguage()">
        <div class="lang-circle"></div>
    </div>

    <a href="wishlist.html" id="wishlistTrigger" class="hover-target" style="position: relative; cursor: pointer; color: inherit; text-decoration: none; display: flex; align-items: center;">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        <span class="cart-count" id="wishlistCount" style="background: #e02e42; position: absolute; top: -5px; right: -5px; width: 16px; height: 16px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 10px; font-weight: bold; color: #fff;">0</span>
    </a>

    <a href="cart.html" id="cartTrigger" class="cart-trigger hover-target" style="text-decoration: none; position: relative; display: flex; align-items: center;">
      <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      <span class="cart-count" id="cartCount" style="position: absolute; top: -5px; right: -5px; background: #fff; color: #000; font-size: 10px; font-weight: bold; width: 16px; height: 16px; border-radius: 50%; display: flex; justify-content: center; align-items: center;">0</span>
    </a>

</div>
</header>

<div class="marquee-container" style="margin-top: 80px;">
    <div class="marquee-content">
        <span>MAGOS ARCHIVE // VOL.1 DARKNESS AVAILABLE NOW // SHIP WORLDWIDE // INDUSTRIAL WEAR // </span>
        <span>MAGOS ARCHIVE // VOL.1 DARKNESS AVAILABLE NOW // SHIP WORLDWIDE // INDUSTRIAL WEAR // </span>
        <span>MAGOS ARCHIVE // VOL.1 DARKNESS AVAILABLE NOW // SHIP WORLDWIDE // INDUSTRIAL WEAR // </span>
    </div>
</div>

<main>
    <section class="hero-slider-container">
        <div class="hero-overlay-text">
            <img src="magos/assets/img/logo-header.svg" alt="ARCHIVE 2026" class="logo-hero">
            <p data-i18n="hero_sub">ESTETIKA GELAP & PAKAIAN INDUSTRIAL.</p>
            <button class="btn primary" onclick="document.getElementById('shop').scrollIntoView()" data-i18n="hero_btn">LIHAT KOLEKSI</button>
        </div>
        <div class="fade-hero-track">
            <div class="fade-slide active"><img src="magos/assets/img/magos_artwork_1.jpg"></div>
            <div class="fade-slide"><img src="magos/assets/img/magos_artwork_2.jpg"></div>
            <div class="fade-slide"><img src="magos/assets/img/magos_artwork_3.jpg"></div>
            <div class="fade-slide"><img src="magos/assets/img/magos_artwork_4.jpg"></div>
            <div class="fade-slide"><img src="magos/assets/img/magos_artwork_5.jpg"></div>
        </div>
    </section>

      <section id="shop" style="padding-top: 80px;">
    <div class="section-header" style="display: flex; align-items: center; gap: 25px; margin-bottom: 50px; padding: 0 5%;">
        <h2 class="section-title" data-i18n="sec_drops" style="margin: 0; white-space: nowrap; font-weight: 900; letter-spacing: 1px; font-size: 24px;">KOLEKSI TERBARU</h2>
        <div class="line-spacer" style="flex: 1; height: 1px; border-top: 1px dashed #333;"></div>
    </div>

    <div class="filter-wrapper" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; padding: 0 5%; margin-bottom: 40px;">
        
        <div class="filter-container" style="margin-bottom: 0; padding: 0; display: flex; gap: 12px; flex-wrap: wrap;">
            <button class="filter-btn active" onclick="filterProducts('all')">ALL</button>
            <button class="filter-btn" onclick="filterProducts('T-SHIRT')">T-SHIRT</button>
            <button class="filter-btn" onclick="filterProducts('OUTERWEAR')">OUTERWEAR</button>
            <button class="filter-btn" onclick="filterProducts('BOTTOMS')">BOTTOMS</button>
            <button class="filter-btn" onclick="filterProducts('ACCESSORIES')">ACCESSORIES</button>
        </div>

        <div class="view-mode-container" style="display: flex; gap: 12px;">
            <button class="filter-btn active" onclick="setViewMode('lookbook')" id="btnLookbook">LOOKBOOK</button>
            <button class="filter-btn" onclick="setViewMode('ecommerce')" id="btnEcommerce">GRID VIEW</button>
        </div>
    </div>

    <div class="grid lookbook-layout" id="productGrid" style="padding: 0 5%; min-height: 400px;"></div> 
    
    <div id="paginationContainer" class="pagination-container" style="margin-top: 60px; padding-bottom: 60px;"></div>
</section>

<section id="social-proof" style="background: #000; border-top: 1px dashed #333;">
    <div class="section-header">
        <h2 class="section-title">@MAGOS.ARCHIEVE</h2>
        <div class="line-spacer"></div>
    </div>
    <div class="grid" style="grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));">
        <div class="prod hover-target"><img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400" style="width:100%; filter:grayscale(1);"></div>
        <div class="prod hover-target"><img src="https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=400" style="width:100%; filter:grayscale(1);"></div>
        <div class="prod hover-target"><img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400" style="width:100%; filter:grayscale(1);"></div>
        <div class="prod hover-target"><img src="https://images.unsplash.com/photo-1534972195531-d756b9bfa9f2?w=400" style="width:100%; filter:grayscale(1);"></div>
        <div class="prod hover-target"><img src="https://images.unsplash.com/photo-1571120038865-c35012e1284a?w=400" style="width:100%; filter:grayscale(1);"></div>
    </div>
</section>

<footer class="industrial-footer">
    <div class="footer-divider"></div>

    <div class="footer-grid">
        
        <div class="f-col brand-col">
            <img src="magos/assets/img/logo-header.svg" alt="MAGOS" class="f-logo">
            <p class="f-desc" data-i18n="hero_sub">ESTETIKA GELAP & PAKAIAN INDUSTRIAL.</p>
            <div class="f-status" id="system-status">
    <span class="dot"></span> <span class="status-text">SYSTEM ONLINE</span>
</div>
        </div>

        <div class="f-col link-col">
            <h4 class="f-head">SITEMAP</h4>
            <ul class="f-links">
                <li><a href="index.html">STUDIO</a></li>
                <li><a href="#shop">ARCHIVE / SHOP</a></li>
                <li><a href="magos/contact.html">CONTACT</a></li>
            </ul>
        </div>

        <div class="f-col link-col">
            <h4 class="f-head">LEGAL</h4>
            <ul class="f-links">
                <li><a href="magos/terms.html" data-i18n="terms_title">TERMS & CONDITIONS</a></li>
                <li><a href="magos/privacy.html">PRIVACY POLICY</a></li>
            </ul>
        </div>

        <div class="f-col link-col end-col">
            <h4 class="f-head">CONNECT</h4>
            <ul class="f-social">
                <li><a href="#">INSTAGRAM <span class="arrow">↗</span></a></li>
                <li><a href="#">SOCIAL MEDIA <span class="arrow">↗</span></a></li>
                <li><a href="mailto:contact@magos.com">EMAIL <span class="arrow">↗</span></a></li>
            </ul>
             <p class="f-copyright" data-i18n="footer_copy">©2026 | USAHADULU STUDIO</p>
        </div>

    </div>
</footer>

<div class="modal-backdrop" id="productModal">
    <div class="modal-window">
      <div class="modal-close" onclick="closeModal('productModal')"><span>&times;</span></div>
      <div class="product-slider-wrapper">
          <div class="product-slider-track" id="pTrack"></div>
          <div class="p-slider-btn prev" onclick="moveProductSlide(-1)">&#10094;</div>
          <div class="p-slider-btn next" onclick="moveProductSlide(1)">&#10095;</div>
      </div>
      <div id="sliderDots" style="display: flex; justify-content: center; gap: 8px; margin-top: 10px; margin-bottom: 10px;">
    </div>
      <div class="modal-info">
    <div class="info-top">
        <h2 class="modal-title" id="mTitle">Nama Produk</h2>
        <p class="modal-price" id="mPrice">Rp 000</p>
        
        <div class="size-chart-trigger" onclick="toggleSizeChart()" data-i18n="btn_size_chart" style="text-align: center; cursor: pointer;">LIHAT SIZE CHART</div>
        
        <div class="product-tabs" style="margin-top: 20px;">
            <div class="tab-header" style="display: flex; gap: 20px; border-bottom: 1px solid #222; margin-bottom: 15px;">
                <span class="tab-link active" onclick="switchTab(event, 'tabDetail')" style="font-size: 10px; font-weight: 900; letter-spacing: 2px; cursor: pointer; padding-bottom: 5px; color: #fff; border-bottom: 2px solid #fff;">DETAIL</span>
                <span class="tab-link" onclick="switchTab(event, 'tabCare')" style="font-size: 10px; font-weight: 900; letter-spacing: 2px; cursor: pointer; padding-bottom: 5px; color: #666;">CARE</span>
            </div>
            
            <div id="tabDetail" class="tab-content" style="display: block; font-size: 11px; line-height: 1.6; color: #aaa;">
                <div id="mDesc"></div> 
            </div>
            
            <div id="tabCare" class="tab-content" style="display: none; font-size: 11px; line-height: 1.6; color: #aaa;">
                <ul style="list-style: none; padding: 0;">
                    <li>• WASH INSIDE OUT</li>
                    <li>• COLD WATER ONLY</li>
                    <li>• DO NOT IRON ON PRINT</li>
                    <li>• DO NOT BLEACH</li>
                    <li>• HANG DRY RECOMMENDED</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="size-selection-frame" style="margin-top: 25px;">
        <p id="sizeLabel" style="font-size: 10px; font-weight: 900; color: #666; margin-bottom: 10px; letter-spacing: 1px;">SELECT SIZE:</p>
        <div class="stock-container" id="stockContainer">
            <div class="stock-item">
                <div class="stock-circle">S</div>
                <span class="stock-num">0</span>
            </div>
            <div class="stock-item">
                <div class="stock-circle">M</div>
                <span class="stock-num">0</span>
            </div>
            <div class="stock-item">
                <div class="stock-circle">L</div>
                <span class="stock-num">0</span>
            </div>
            <div class="stock-item">
                <div class="stock-circle">XL</div>
                <span class="stock-num">0</span>
            </div>
            <div class="stock-item">
                <div class="stock-circle">XXL</div>
                <span class="stock-num">0</span>
            </div>
        </div>

        <div id="allSizeBadge" style="display: none; margin-top: 10px;">
            <div style="display: inline-block; border: 1px solid #333; padding: 10px 25px; border-radius: 50px; font-weight: 900; font-size: 11px; color: #fff;">ALL SIZE</div>
        </div>
    </div>

    <div id="stockScarcity" style="height: 20px; margin: 15px 0;">
        <p id="scarcityText" class="blink-red" style="font-size: 9px; font-weight: 900; color: #ff0000; letter-spacing: 1.5px; text-transform: uppercase; display: none;"></p>
    </div>

    <div class="info-bottom">
        <button class="btn primary" id="btnAddToCart" style="display: none; width:100%;">ADD TO CART</button>
    </div>

    <div class="related-products-section" style="margin-top: 30px; border-top: 1px dashed #333; padding-top: 20px;">
        <h4 style="font-size: 10px; letter-spacing: 2px; color: #666; margin-bottom: 15px; text-transform: uppercase;">YOU MIGHT ALSO LIKE</h4>
        <div id="relatedGrid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            </div>
    </div>
</div>
</div>

        <div id="allSizeBadge" style="display: none;">
            <div style="display: inline-block; border: 1px solid #fff; background: #fff; color: #000; padding: 10px 30px; border-radius: 50px; font-weight: 900; font-size: 12px; letter-spacing: 1px;">ALL SIZE</div>
        </div>
    </div>

    <div id="stockScarcity" style="height: 20px; margin-bottom: 20px;">
        <p id="scarcityText" class="blink-red" style="font-size: 9px; font-weight: 900; color: #ff0000; letter-spacing: 1.5px; text-transform: uppercase; display: none;"></p>
    </div>

<div class="modal-backdrop" id="checkoutModal">
    <div class="modal-window checkout-window">
        <div class="modal-close" onclick="closeModal('checkoutModal')"><span>&times;</span></div>
        <div class="checkout-content">
            <h2 class="modal-title" style="margin-bottom: 20px; border-bottom: 1px dashed #333; padding-bottom: 15px;">CHECKOUT</h2>
            <div id="step-1-info" class="checkout-step">
                <h4 style="margin-bottom:15px; color:#fff;">1. SHIPPING DETAILS</h4>
                <div class="form-group"><label>Full Name</label><input type="text" id="coName" class="contact-input" placeholder="Ex: Fajri"></div>
                <div class="form-group"><label>WhatsApp / Phone</label><input type="tel" id="coPhone" class="contact-input" placeholder="08xx"></div>
                <div class="form-group"><label>Full Address</label><textarea id="coAddress" class="contact-input" rows="3" placeholder="Street, City, Country, Zip Code"></textarea></div>
                <button class="btn primary" onclick="goToStep2()" style="width:100%; margin-top:10px;">NEXT: SHIPPING & PAYMENT</button>
            </div>
            <div id="step-2-shipping" class="checkout-step" style="display:none;">
                <h4 style="margin-bottom:15px; color:#fff;">2. METHOD</h4>
                <div class="form-group">
                    <label>Shipping Courier</label>
                    <select id="coCourier" class="contact-input" onchange="calculateGrandTotal()">
                        <option value="jne">JNE REG (Local - IDR 30.000)</option>
                        <option value="jnt">J&T Express (Local - IDR 35.000)</option>
                        <option value="dhl">DHL Express (Intl - IDR 550.000)</option>
                        <option value="fedex">FedEx (Intl - IDR 600.000)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Payment Method</label>
                    <select id="coPayment" class="contact-input">
                        <option value="BCA">BCA Transfer (Virtual Account)</option>
                        <option value="QRIS">QRIS (GoPay/OVO/Dana)</option>
                        <option value="PAYPAL">PayPal (International Only)</option>
                    </select>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn ghost" onclick="showStep(1)" style="width:50%;">BACK</button>
                    <button class="btn primary" onclick="goToStep3()" style="width:50%;">REVIEW ORDER</button>
                </div>
            </div>
            <div id="step-3-summary" class="checkout-step" style="display:none;">
                <h4 style="margin-bottom:15px; color:#fff;">3. ORDER SUMMARY</h4>
                <div class="confirm-data-box" style="font-size: 11px; color: #aaa; margin-bottom: 20px;">
                    <p><strong style="color:#fff;">Ship To:</strong> <span id="sumName">-</span></p>
                    <p><strong style="color:#fff;">Address:</strong> <span id="sumAddress">-</span></p>
                    <p><strong style="color:#fff;">Courier:</strong> <span id="sumCourier">-</span></p>
                    <p><strong style="color:#fff;">Payment:</strong> <span id="sumPayment">-</span></p>
                </div>
                <div class="voucher-section" style="margin-bottom: 20px; padding: 15px; background: #080808; border: 1px dashed #333; border-radius: 8px;">
                    <label style="font-size:10px; font-weight:bold; color:#666; display:block; margin-bottom:5px;">HAVE A PROMO CODE?</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="voucherCode" class="contact-input" placeholder="Ex: MGS-STORE" style="text-transform: uppercase; padding: 8px;">
                        <button class="btn" onclick="applyVoucher()" style="padding: 8px 15px; font-size: 10px;">APPLY</button>
                    </div>
                    <p id="voucherMsg" style="font-size: 10px; margin-top: 5px; display: none;"></p>
                </div>
                <div style="border-top: 1px dashed #333; padding-top: 15px; margin-bottom: 20px;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px; font-size:12px; color:#888;">
                        <span>Subtotal</span><span id="sumSubtotal">Rp 0</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px; font-size:12px; color:#888;">
                        <span>Shipping Cost</span><span id="sumShippingCost">Rp 0</span>
                    </div>
                    <div id="rowDiscount" style="display:none; justify-content:space-between; margin-bottom:5px; font-size:12px; color:#25D366;">
                        <span>Discount</span><span id="sumDiscount">- Rp 0</span>
                    </div>
                    <div style="display:flex; justify-content:space-between; font-weight:900; font-size:16px; color:#fff; margin-top:10px; border-top: 1px solid #333; padding-top: 10px;">
                        <span>TOTAL</span><span id="sumGrandTotal">Rp 0</span>
                    </div>
                </div>
                <button class="btn primary" onclick="generateInvoicePDF()" style="width:100%;">DOWNLOAD INVOICE (PDF)</button>
                <button class="btn" onclick="sendOrderViaWA()" style="width:100%; margin-top:10px; background:#25D366; border-color:#25D366; color:#fff; font-weight:900;">
                    CONFIRM VIA WHATSAPP &rarr;
                </button>
                <button class="btn ghost" onclick="showStep(2)" style="width:100%; margin-top:10px;">BACK</button>
            </div>
        </div>
    </div>
</div>

<div class="modal-backdrop" id="sizeChartModal">
    <div class="modal-window size-chart-window" style="max-width: 550px; padding: 40px; display: flex; flex-direction: column; gap: 20px;">
        <div class="modal-close" onclick="closeModal('sizeChartModal')"><span>&times;</span></div>
        
        <h3 style="margin: 0; font-weight: 900; letter-spacing: 2px; font-size: 24px; border-bottom: 1px dashed #333; padding-bottom: 15px; color: #fff;">SIZE GUIDE</h3>
        
        <div class="static-chart-container" style="width: 100%; display: flex; justify-content: center; overflow: hidden; border-radius: 12px; border: 1px solid #1a1a1a;">
            <img src="assets/img/size-guide.jpg" alt="Size Chart" style="width: 100%; height: auto; display: block;">
        </div>
        
        <p style="text-align: center; font-size: 9px; color: #555; margin: 0; text-transform: uppercase; letter-spacing: 1px;">*Tolerance 1-2cm due to manual measurement.</p>

        <div class="size-calculator" style="margin-top: 5px; padding: 25px; background: #0d0d0d; border-radius: 20px; border: 1px solid #151515;">
            <h4 style="font-size: 10px; font-weight: 900; letter-spacing: 2px; margin-bottom: 15px; color: #666; text-align: center;">SIZE RECOMMENDATION</h4>
            
            <div class="input-group" style="display: flex; gap: 12px; margin-bottom: 20px;">
                <input type="number" id="calcHeight" placeholder="HEIGHT (CM)" style="flex: 1; background: #050505; border: 1px solid #222; color: #fff; padding: 12px; font-size: 11px; font-weight: 700; border-radius: 8px;">
                <input type="number" id="calcWeight" placeholder="WEIGHT (KG)" style="flex: 1; background: #050505; border: 1px solid #222; color: #fff; padding: 12px; font-size: 11px; font-weight: 700; border-radius: 8px;">
            </div>
            
            <button onclick="calculateSize()" class="btn primary" style="width: 100%; padding: 12px; font-weight: 900; border-radius: 50px;">FIND MY SIZE</button>
            
            <div id="calcResult" style="margin-top: 15px; text-align: center; display: none;"></div>
        </div>
    </div>
</div>

<div class="cart-drawer-backdrop" id="cartBackdrop" onclick="toggleCart()"></div>

<div class="cart-drawer" id="cartDrawer">
    <div class="cart-header" style="padding: 20px; border-bottom: 1px solid #1a1a1a;">
        <div class="cart-title-capsule" onclick="toggleCart()" style="display: flex; justify-content: space-between; align-items: center; cursor: pointer;">
            <span style="font-weight:900; letter-spacing:2px; font-size:14px; color: #fff;">MY CART</span>
            <span class="close-icon-inside" style="font-size: 24px; color: #666;">&times;</span>
        </div>
    </div>
    
    <div class="cart-items-container" id="cartItemsContainer" style="flex: 1; overflow-y: auto; padding: 20px; gap: 15px; display: flex; flex-direction: column;">
        </div>
    
    <div class="cart-footer" style="padding: 20px; border-top: 1px solid #1a1a1a; background: #050505;">
        <div class="cart-total" style="display: flex; justify-content: space-between; margin-bottom: 20px;">
            <span style="font-weight: 900; font-size: 12px; color: #666;">SUBTOTAL</span>
            <span id="cartTotalDisplay" style="font-weight: 900; font-size: 14px; color: #fff;">Rp 0</span>
        </div>
        <button class="btn primary cart-checkout-btn" onclick="openCheckoutModal()" style="width: 100%; padding: 15px; font-weight: 900; border-radius: 50px;">PROCEED TO CHECKOUT</button>
    </div>
</div>

<div class="cart-drawer" id="wishlistDrawer" style="border-left: 1px solid #333;">
    <div class="cart-header">
        <div class="cart-title-capsule" onclick="toggleWishlist()">
            <span style="font-weight:900; letter-spacing:1px; font-size:12px;">WISHLIST</span>
            <span class="close-icon-inside">&times;</span>
        </div>
    </div>
    <div class="cart-items-container" id="wishlistItemsContainer"></div>
</div>
<script src="magos/js/magos.js"></script>
<script>
    async function loadMagosProducts() {
    try {
        const response = await fetch('_data/magos_products.json');
        const data = await response.json();
        
        const processedItems = data.items.map(item => {
            // Transformasi images_list dari Admin menjadi array images yang bisa dibaca slider & related
            const gallery = item.images_list ? item.images_list.map(imgObj => imgObj.url) : [item.img];
            
            return {
                ...item,
                images: gallery, 
                status: item.status || "NORMAL",
                sizeChart: item.size_chart_custom || "assets/img/size-guide.jpg"
            };
        });

        if (typeof displayProducts === "function") {
            products = processedItems; 
            
            // --- PERBAIKAN VITAL: PAKSA SINKRONISASI KE STORAGE ---
            // Ini akan menimpa data stok dummy (0) dengan data asli dari Admin
            localStorage.setItem('magos_products_data', JSON.stringify(products)); 
            
            displayProducts('all', 1); 
        }
    } catch (error) {
        console.error("MAGOS System Error:", error);
    }
}

    async function loadHeroBanners() {
    try {
        const response = await fetch('_data/hero_config.json');
        const data = await response.json();
        const heroTrack = document.querySelector('.fade-hero-track');
        if (data.banners && data.banners.length > 0) {
            let content = "";
            data.banners.forEach((banner, index) => {
                const active = index === 0 ? 'active' : '';
                content += `<div class="fade-slide ${active}" data-promo="${banner.promo_text || ''}"><img src="${banner.image}"></div>`;
            });
            heroTrack.innerHTML = content;
            startFadeHero(); // Jalankan ulang animasi slider
        }
    } catch (e) { console.log("Hero banner default aktif."); }
}

// Tambahkan loadHeroBanners ke window load
window.addEventListener('load', () => {
    loadMagosProducts();   // Muat Produk
    loadHeroBanners();     // Muat Banner Promo dari Admin
    loadSocialConfig();    // Muat Grid Instagram
});

    function applyStatusEffects(currentItems) {
    const productElements = document.querySelectorAll('#productGrid .prod');
    
    productElements.forEach((el, index) => {
        const pData = currentItems[index]; 
        if (!pData) return;

        // Cek apakah semua stok ukuran adalah 0
        const isActuallySoldOut = Object.values(pData.stock).every(s => s === 0) || pData.status === 'SOLDOUT';

        if (isActuallySoldOut) {
            el.style.filter = "grayscale(100%)"; // Membuat petak produk jadi hitam putih
            el.style.opacity = "0.6"; // Sedikit transparan
            el.style.pointerEvents = "auto"; // Tetap bisa diklik untuk lihat detail
            
            // Tambahkan badge SOLDOUT jika belum ada
            if (!el.querySelector('.status-badge')) {
                const badge = document.createElement('div');
                badge.className = 'status-badge';
                badge.innerText = 'SOLD OUT';
                badge.style = "position: absolute; top: 15px; left: 15px; background: #ff0000; color: #fff; padding: 6px 15px; font-weight: 900; font-size: 11px; z-index: 5;";
                el.appendChild(badge);
            }
        }
    });
}
    // Satu-satunya event listener yang diperlukan
    // Gabungkan dalam satu blok script atau pastikan tag pembuka benar
    window.addEventListener('load', () => {
    loadMagosProducts();   // Muat Produk
    loadHeroBanners();     // Muat Banner Promo dari Admin
    loadSocialConfig();    // Muat Grid Instagram
});

    async function loadSocialConfig() {
        try {
            const response = await fetch('_data/social_config.json');
            const data = await response.json();
            
            const igGrid = document.querySelector('#social-proof .grid');
            if(igGrid) {
                // Style tambahan agar posisi grid benar-benar di tengah
                igGrid.style.display = "grid";
                igGrid.style.gap = "15px";
                igGrid.style.gridTemplateColumns = "repeat(auto-fill, minmax(160px, 1fr))";
                igGrid.style.padding = "0 20px 40px";

                let content = "";
                const previewImages = data.ig_preview || [];

                previewImages.forEach(img => {
                    content += `
                        <a href="${data.ig_link || '#'}" target="_blank" class="ig-item hover-target">
                            <img src="${img.url}" alt="MAGOS IG">
                        </a>`;
                });

                // Placeholder jika gambar kurang dari 5
                if(previewImages.length < 5) {
                    for(let i = 0; i < (5 - previewImages.length); i++) {
                        content += `
                            <div class="ig-item placeholder" style="display: flex; align-items: center; justify-content: center; background: #080808; border: 1px dashed #222;">
                                <span style="font-size: 8px; color: #333; font-weight: 900; letter-spacing: 2px;">OFFLINE</span>
                            </div>`;
                    }
                }
                igGrid.innerHTML = content;
            }
        } catch (e) { 
            console.log("Social Config error."); 
        }
    }
</script>
<script>
    function startFadeHero() {
        // Mengambil elemen berdasarkan class unik tadi
        const slides = document.querySelectorAll('.fade-hero-track .fade-slide');
        let currentIdx = 0;

        if (slides.length === 0) return;

        // Interval berganti setiap 2 detik (2000ms)
        setInterval(() => {
            // 1. Hilangkan active dari gambar yang tampil sekarang
            slides[currentIdx].classList.remove('active');
            
            // 2. Tentukan urutan berikutnya
            currentIdx = (currentIdx + 1) % slides.length;
            
            // 3. Munculkan gambar berikutnya dengan fade
            slides[currentIdx].classList.add('active');
        }, 2000); 
    }

    // Jalankan setelah semua elemen HTML siap
    document.addEventListener('DOMContentLoaded', startFadeHero);
</script>
<script>
/**
 * MAGOS SYSTEM REPAIR - PRODUCTION READY
 * Menangani sinkronisasi antara UI (Index) dan Data (CartId)
 */

window.removeFromCart = function(identifier) {
    // 1. Validasi keberadaan data keranjang
    if (typeof cart === 'undefined' || cart.length === 0) return;

    let itemToRemove;

    // 2. Deteksi Identifier (Apakah Index array atau CartID unik)
    // Jika angka kecil (< 1000), sistem mengasumsikan itu adalah index array dari UI
    if (typeof identifier === 'number' && identifier < 1000) {
        itemToRemove = cart[identifier];
    } else {
        // Jika angka besar/timestamp, cari berdasarkan properti cartId
        itemToRemove = cart.find(item => item.cartId === identifier);
    }

    if (itemToRemove) {
        const targetId = itemToRemove.cartId;
        
        // 3. Update stok di database produk (Agar sinkron dengan Grid)
        if (typeof products !== 'undefined') {
            const productInDb = products.find(p => p.id === itemToRemove.id);
            if (productInDb) {
                // Kembalikan jumlah stok sesuai kuantitas yang dibuang
                const qtyToRestore = itemToRemove.qty || 1;
                productInDb.stock[itemToRemove.size] += qtyToRestore;
                
                // Simpan perubahan stok ke storage gudang
                localStorage.setItem('magos_products_data', JSON.stringify(products));
            }
        }
        
        // 4. Hapus item dari array cart global
        cart = cart.filter(item => item.cartId !== targetId);
        
        // 5. Sinkronisasi ke LocalStorage & Refresh UI
        localStorage.setItem('magos_cart', JSON.stringify(cart));
        
        // Panggil fungsi internal dari magos.js untuk update tampilan
        if (typeof updateCartUI === 'function') {
            updateCartUI();
        }
        
        // Refresh grid produk agar status 'SOLDOUT' hilang jika stok kembali ada
        if (typeof displayProducts === 'function') {
            displayProducts(currentFilter || 'all', currentPage || 1);
        }
        
        console.log(`MAGOS_SYSTEM: Item ${targetId} removed. Stock restored.`);
    }
};

/**
 * WISHLIST REPAIR
 * Menggunakan sistem toggle bawaan magos.js
 */
window.removeFromWishlist = function(index) {
    if (typeof wishlist !== 'undefined' && wishlist[index]) {
        const item = wishlist[index];
        // Fungsi toggleWishlistItem sudah otomatis menghapus jika ID sudah ada
        toggleWishlistItem(item.id); 
    }
};
const processedItems = data.items.map(item => {
    // Transformasi data admin images_list menjadi images array tunggal
    const gallery = item.images_list ? item.images_list.map(imgObj => imgObj.url) : [item.img];
    
    return {
        ...item,
        images: gallery // Pastikan ini menjadi 'images' agar dibaca oleh fungsi slider & related
    };
});

</script>
